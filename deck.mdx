import { Head, Notes, Image } from 'mdx-deck'
import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { github, vsDark } from "@code-surfer/themes";
import List from './components/List'
import FullImage from './components/FullImage'
import lighthouseAudit1 from './images/lighthouse-audits-start-useReact.png'
import lighthouseAudit2 from './images/lighthouse-a11y-results-useReact.png'
import lighthouseAudit3 from './images/lighthouse-a11y-results-expanded-useReact.png'
import lighthouseAudit4 from './images/lighthouse-results-all-useReact.png'
import reactAxeDemo from './images/react-axe-demo.gif'
import failedFocusTest from './images/failed-focus-test.png'
import onBlurError from './images/on-blur-error-useReact.gif'
import cypressA11yFail from './images/cypress-a11y-fail.png'
import altTextUseReact from './images/alt-text-useReact.png'


export const theme = vsDark;

<Head>
  <title>How to do without doing anything</title>
</Head>

# Hello üëã

<Notes>

- hope everyones cozying up at home, washing their hands and social distancing.
- I myself will be dialing into this conference from my couch in cozy sweat pants with an offensively large cup of tea.

</Notes>

---

# Yuraima Estevez

<List>
  <li>üë©‚Äçüíª Tech Lead</li>
  <li>üì∞ The New York Times</li>
  <li>‚ù§Ô∏è Make the web better for everyone</li>
</List>

<Notes>

- besides dogs i also love to make the web better for everyone
- what does that mean for me? building community and culture as a meetup organizer and tech leader at work.
- going to conferences and teaching folks how they can make the web better for everyone
- and of course that comes in the form of advocating for accessibility on the web.  Why?
- because at its core, web accessibility is about making apps, sites and tools that work for everyone including people with disabilities.
- and when we build things that can work for everyone on the web, we in turn mak the web better for everyone.

</Notes>

---

<List appear={false}>
  <li>üë©‚Äçüíª Tech Lead</li>
  <li>üì∞ The New York Times</li>
  <li>‚ù§Ô∏è Make the web better for everyone</li>
</List>

<Notes>

- a11y can be hard, but that doesn't mean we're allowed to just ignore it.
- in fact, we should be looking for opportuninties where we can set ourselves up to be more efficient and resilient in our accessibility practices so that over time we can free ourselves up to dedicating the time and resources we save on solving complex problems.
- And that's where testing and automation come into play.

</Notes>


---

<List appear={false}>
  <li>üë©‚Äçüíª Tech Lead</li>
  <li>üì∞ The New York Times</li>
  <li>‚ù§Ô∏è Make the web better for everyone</li>
</List>

<Notes>

- As engineers we've already embraced the practice of protecting ourselves from bugs by writing tests and cutting time in our development process through continuous integrations and development.
- We can take those same practices and apply them to developing accessible sites and apps.
- And when we invest in testing and automating parts of our accessibility development, we build confidence in our systems that they will work for everyone, and consequently, make the web better for everyone.
- So today, we're going to talk about...

</Notes>


---

# HOW TO DO GOOD, WITHOUT DOING ANYTHING

<Notes>

-  how we can do good, without doing anything...

</Notes>

---

# HOW TO DO GOOD by doing some work upfront

---

# HOW TO DO GOOD by doing some work upfront and then, eventually,

---

# HOW TO DO GOOD by doing some work upfront and then, eventually, WITHOUT DOING ANYTHING.

---

# HOW TO DO GOOD by doing some work upfront and then, eventually, WITHOUT DOING ANYTHING. sometimes...

---

<List>
  <li><h1>Tools</h1></li>
  <li><h1>Testing</h1></li>
</List>

<Notes>

- break this up into two parts.
- TOOLS. automated tools used at different stages of my development process.
- helps automate the harder tasks that we often do and help keep my codebases free of accessibility bugs
- TESTING. what kinds of test we write and what we want to validate when it comes to accessibility support in our components and apps.

</Notes>

---

<List appear={false}>
  <li><h1>Tools</h1></li>
  <li><h1>Testing</h1></li>
</List>

<Notes>

- disclaimer: i primarily work in javascript specifically react on the FE. Lots of my examples will be in react.  But almost everything in this talk is agnostic of language, framework, library. 
- the impolementation details will be specific to your code bases, but you can use the types of tools and strategies in this talk to help guide those decisions on how to make a path forward for yourself.

</Notes>

---

# Tools

<Notes>

- kick it off with tools.

</Notes>

---

# [eslint-plugin-jsx-a11y](https://github.com/evcohen/eslint-plugin-jsx-a11y)
Set of accessibility linter rules that checks JSX elements during development

<Notes>

- low lift, most people already have linters
- Helps you catch common accessibility mistakes in your code while your developing
- Automate it using git hooks to prevent inaccessible code from getting committed
- Can use it in your CI/CD pipeline to fail builds that don‚Äôt pass and prevent accessibility issues from making it into production

</Notes>

---

# [Lighthouse](https://developers.google.com/web/tools/lighthouse)
An open-source, automated tool for improving the quality of web pages.

<Notes>

- Allows you to run accessibility audits on your website.
- You'll receive a score for how accessible your site is.
- Based on how closely we adhere to accessibility standards and best practices.

</Notes>

---

# [Lighthouse](https://developers.google.com/web/tools/lighthouse)

<List bullets appear={false}>
  <li>Chrome DevTools</li>
  <li>Command Line</li>
  <li>CI Systems</li>
  <li>Web UI</li>
</List>

<Notes>

- comes in different flavors
- all of these do the same thing, just depends on how we want to use it based on preference.

</Notes>

---

<!-- shows the lighthouse accessibility audit for useReact.nyc website -->

<Image src={lighthouseAudit1} />

<Notes>

- for now let's look at lighthouse in chrome devtools.
- If you open the "Audits" tab you'll see a list of audits that you can run and some different options we can set.
- using the useReactNYC website for demonstrations.

</Notes>

___

<!-- shows the lighthouse accessibility audit results for useReact.nyc website -->

<Image src={lighthouseAudit2} />

<Notes>

- We can choose the accessibility audit to run and lighthouse will give us a score out of 100.
- This lets us know how accessible our website is by checking if we're adhereing to accessibility standards and best practices.

</Notes>

___

<!-- shows all lighthouse audit results for useReact.nyc website -->

<Image src={lighthouseAudit3} />

<Notes>

- Along with our score we get a list of where we lost points, and how we can fix these errors.
- I like to run lighthouse in the devtools when I want to get a sense of a site's baseline accessibility score.
- Or as I make changes to make sure I'm not unintentionally degrading my accessibility support.

</Notes>

___

<!-- shows expanded results for useReact.nyc website -->

<Image src={lighthouseAudit4} />

<Notes>

- One perk that lighthouse gives us is that you can use it for running other audits, not just accessibility.
- Performance, best practices, seo, progressive web apps.
- All of this is rolled into one tool so that you can make sure you're building a top quality site without a ton of additional work on your end.

</Notes>

___

# [react-axe](https://github.com/dequelabs/react-axe)
Open source tool that tests the accessibility of React applications and displays the results in the Chrome DevTools console.

---

<!-- react-axe import code  -->

<CodeSurfer>

```js file=./code/react-axe-import.js
```

```js 4:8 file=./code/react-axe-import.js
```

</CodeSurfer>

<Notes>

- Here's how you would use react-axe in your projects.
- NEXT SLIDE
- Note that I'm only running react-axe in NON-PRODUCTION environments.
- It'll be clear why we do that when we see how it works.

</Notes>

___

<!-- react-axe walkthrough gif -->

<FullImage src={reactAxeDemo} />

<Notes>

- using the times wellness challenge as a demonstration 
- open up the DevTools console.
- adding messages to our console highlighting accessibility errors on the page.
- Includes a severity rating (minor, moderate, serious).
- a link to a helpful resource for details on the error and how we can fix it.
- Lighthouse is different, only statically checks our site.
- react axe is working as we use it, evaluates the rerenders with every interaction.
- That's why we only run in non-production environments, because the performance hit would be detrimental.

</Notes>

---

# Testing

<Notes>

- Let's move on to adding automated tests to check the continued accessibility of our apps.
- Quick disclaimer: I'll share the tools I use, but the frameworks and libraries here don't matter
- Pay attention to what I test and why it's important to test them.

</Notes>

___

# Testing

<List appear={false}>
  <li>Unit Tests</li>
  <li>Integration Tests</li>
  <li>End-to-end Tests</li>
</List>

<Notes>

- Covering three kinds of tests.  These are the most common.

</Notes>

___

# Unit Tests

<List appear={false}>
  <li>Component API and Behavior</li>
  <li>ARIA attributes</li>
  <li>Focus States</li>
</List>

<Notes>

- testing individual, stand-alone components.
- Can validate a component's api and behavior.
- That there are aria attributes present and their values.
- Keyboard navigation.

</Notes>

---

# [Jest](https://jestjs.io/en/)

<Notes>

- Testing framework that's usually paired with React
- framework, library, environemnt agnostic

</Notes>

---

# [react-testing-library](https://testing-library.com/docs/react-testing-library/api)

<Notes>

- library full of helpful testing methods for querying and matching values.
- part of a larger testing suite with many other libraries for different technologies.

</Notes>

---

<!-- button component code -->

<CodeSurfer>

```js file=./code/unit-test-0.0.0.js
```

```js 6,14 file=./code/unit-test-0.0.0.js
```

</CodeSurfer>

<Notes>

- Let's start off with a simple, accessible button.
- And let's test that our button will render the right ARIA attribute when it's passed as a prop.

</Notes>

---

# [ARIA Attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA)
HTML attributes that help define the semantics of an element or component for assistive technologies.

*[check out my talk on building accessible components](https://youtu.be/lxxYParyAGk?t=24456)
<Notes>

- ARIA attributes provide more information to assistive technologies like a screen reader so they understand our components.
- We want to make sure that we're including them where appropriate, making them perfect to test for.
- Go to my talk on accessible components to learn more about ARIA and how to use. 

</Notes>

---

<!-- button component highlighting aria-label -->

<CodeSurfer>

```js 13,14 file=./code/unit-test-0.0.0.js
```

</CodeSurfer>

<Notes>

- The ARIA attribute we want to test for here is called 'aria-label'
- it provides a label for the element it's applied to so that something like a screen reader can announce to users.


</Notes>

---

<!-- step through button test for aria-label  -->

<CodeSurfer>

```js file=./code/unit-test-0.0.1.js
```

```js 1 file=./code/unit-test-0.0.1.js
```

```js 2:6 file=./code/unit-test-0.0.1.js
```

```js 7:8 file=./code/unit-test-0.0.1.js
```

```js 10 file=./code/unit-test-0.0.1.js
```

</CodeSurfer>

<Notes>

- Let's step through
- NEXT: testing that we only render the aria-label when we have the right prop.
- NEXT: construct our accessible button component and make sure not to pass the accessibleLabel prop
- NEXT: render that button and query for the button node
- NEXT: what we care about. asserting that our rendered button does NOT have an aria-label attribute
- again, testing library/framework don't matter.  APIs differ, focus on testing the presence or absence of the aria attribute.

</Notes>

---

<!-- button test that the aria label is there -->

<CodeSurfer>

```js file=./code/unit-test-0.0.2.js
```

```js 5,12 file=./code/unit-test-0.0.2.js
```

</CodeSurfer>

<Notes>

- Also test that the label attribute is there when we do pass the prop to it.
- most is the same, but passing the accessibleLabel attribute.
- and asserting that our button does have the aria-label attribute
- and it's set to the label that we passed to our component.

</Notes>

---

<!-- button test for focus on the button -->

<CodeSurfer>

```js file=./code/unit-test-0.0.3.js
```

```js 10 file=./code/unit-test-0.0.3.js
```

```js 11 file=./code/unit-test-0.0.3.js
```

</CodeSurfer>

<Notes>

- Let's set up another test, this time for focus.
- Testing that our components can gain focus is good for testing keyboard navigation.
- All of our interactive elements need to support keyboard only users.
- only elements that can be focused are interactible with a keyboard
- NEXT: call the focus method on our button.
- NEXT: check that our button is now focused

</Notes>

---

<!-- accessible button with div subbed in -->

<CodeSurfer>

```js file=./code/unit-test-0.0.0.js
```

```js 8,17 file=./code/unit-test-0.0.0.js
```

```js 8,17 file=./code/unit-test-0.0.4.js
```

</CodeSurfer>

<Notes>

- This test protects us in the future from introducing bugs that break keyboard navigation.
- By default html buttons support keyboard nav and focus.
- NEXT: but what if someone comes by and changes our button to a div?
- divs are not focusable elements, and therefore will not support keyboard nav.

</Notes>

---

<!-- failed test for focusing button -->

<FullImage src={failedFocusTest} />

<Notes>

- now this will fail our test and let us know that we've likely introduced a bug in our code that breaks keyboard navigation for our users.

</Notes>

---

# Integration Tests
How individual components interact with each other

<Notes>

- What we just covered in unit tests can also be applied to integration test.
- Less concerned about component APIs
- More about the outcomes of how components come together.
- Can also test aria attributes and keyboard navigation, but this time in the context of multiple components working together.

</Notes>

---

<!-- Slack component demo gif  -->

<FullImage src={onBlurError} />

<Notes>

- example from useReact website
- slack sign up via email.
- when i focus into the email input and then blur out, validation is run.
- if no valid email, red outline is added to input to signal that i need to add an email.
- i also need to make sure my screen reader users are notified of this error somehow.
- and that's what we're going to test, to make sure that my signal for assistive technologies works.

</Notes>

---

<!-- Slack component code intro -->

<CodeSurfer>

```js file=./code/integration-test-0.0.0.js
```

```js 6,7,8,9,15,19 file=./code/integration-test-0.0.0.js
```

```js 28,29 file=./code/integration-test-0.0.0.js
```

</CodeSurfer>

<Notes>

- Let's take a look at this component.
- Composed of multiple components that this container passes props to.
- NEXT: Accessible input accepts onBlur function 
- NEXT: This function validates our email when a user unfocuses the input
- NEXT: And there's an accessible alert component that accepts an error message if there's an error with validation.

</Notes>

---

<!-- Accessible alert component walkthrough -->

<CodeSurfer>

```js file=./code/integration-test-0.0.1.js
```

```js 2 file=./code/integration-test-0.0.1.js
```

```js 3 file=./code/integration-test-0.0.1.js
```

</CodeSurfer>

<Notes>

- Here's our accessible alert component
- NEXT: it's visually hidden so it doesn't show up on the page because this component is only here for assistive technologies.
- NEXT: role=alert. aria attribute that will announce changes to this component.  When we add an error message, a screen reader will announce that message.
- empty to start because only changes to the node are announced.

</Notes>

---

<!-- Accessible alert test walkthrough -->

<CodeSurfer>

```js file=./code/integration-test-0.0.2.js
```

```js 5 file=./code/integration-test-0.0.2.js
```

```js 6:9 file=./code/integration-test-0.0.2.js
```

```js 11:16 file=./code/integration-test-0.0.2.js
```

```js 18:23 file=./code/integration-test-0.0.2.js
```

</CodeSurfer>

<Notes>

- Let's look at a simple test I could write to make sure that this actually happens with all of my different components in the SlackSignupContainer.
- NEXT: test that my alert is updated when the input is blurred.
- NEXT: render my signup container component and get references to input and alert components.
- NEXT: focus into my input and assert that my alert contains no text in it.
- NEXT: blur out without a valid email, assert that my alert component does receive our error message.


</Notes>


---

# End-to-end Tests
Evaluate your entire app and full user flows

<Notes>

- tests that are the closest to how a user would experience your website.
- you can evaluate the same things as with user and integration tests,
- but do it within the context of your entire app.
- great for checking navigation and specific user interactions.

</Notes>

---

# [cypress.io](https://docs.cypress.io/guides/overview/why-cypress.html#In-a-nutshell)
Open source e2e testing framework

<Notes>

- Great for browser driven testing.
- has excellent accessibility support.

</Notes>

---

<!-- Accessible alert test walkthrough -->

<CodeSurfer>

```js file=./code/e2e-test-0.0.0.js
```

</CodeSurfer>

<Notes>

- really like the cypress-axe plugin.
- checks for accessibility errors, similar to lighthouse and react-axe but built into your testing suite.

</Notes>

---

<FullImage src={cypressA11yFail} />

<Notes>

- will fail if there are any accessibility errors.
- if you don't want to run something like react-axe or lighthouse, this is a great low effort alternative

</Notes>

---

<FullImage src={altTextUseReact} />

<Notes>

- Let's see how we can write our own e2e with a short and easy one.
- on the useReact website we have a section with all of the organizer photos.
- for screen reader support, all of these images need to have an alt attribute set.

</Notes>

---

<!-- Accessible alert test walkthrough -->

<CodeSurfer>

```js file=./code/e2e-test-0.0.1.js
```

```js 4 file=./code/e2e-test-0.0.1.js
```

```js 5 file=./code/e2e-test-0.0.1.js
```

```js 10:13 file=./code/e2e-test-0.0.1.js
```

```js 15:16 file=./code/e2e-test-0.0.1.js
```

</CodeSurfer>

<Notes>

- NEXT: let's check that when my page renders in the browser, organizers all have alt text
- NEXT: cypress query for our organizer images
- NEXT: then get the alt attribute values for all of our images.
- NEXT: and assert that this should have a length of 5, equal to the number of organizers we have.
- Super simple test, actually gets checked by cypress-axe, but what's important here is that we're writing e2e tests that mimic user behavior.
- if i were a screen reader user...

</Notes>

---

# Manual Testing

<Notes>

- Before we wrap up on testing i want to highlight the importance of manual testing.
- the presence of automated tests doesn't absolve you from manually testing your applications.
- Tests provide you with the peace of mind that fewer bugs will unintentionally be introduced into your codebase
- but tests won't protect you from weird edge cases or uncover that the user flow you designed doesn't actually work for the user once its in their hands.


</Notes>

---

# Manual Testing

<Notes>

- And that means we still have to manually test some things.
- But the time that we save because we invested in automating certain aspects of of our development process automatically gets redistributed to parts of our applications that require a finer touch or a sharper eye.
- And this is especially important when we're building out accessibility features in our applications.

</Notes>

---

# Manual Testing

<Notes>

- It isn't always easy to go off of the accessibility documentation and know whether or not you've implented something correctly.
- And sometimes, even when we think we have a perfectly accessible solution, we find out that it's not quite right when it's used in the real world by a person with disabilities.
- And this is where our freed up time gets reinvested.  When testing and automation pick up the bulk of the repetitive work and QA process, we can spend more time working to solve these more nuanced challenges and building out amazing, accessible features.

</Notes>

---

<List>
  <li><h1>Tools</h1></li>
  <li><h1>Testing</h1></li>
</List>

<Notes>

- And that brings me to the end of the basics so lets recap
- NEXT: tools, help prevent accessibility bugs from being introduced in writing code, commiting to code base, shipping to production.
- Generating audits and uncovering where we can improve our accessibility support.
- NEXT: In testing we covered unit, integration, e2e.  When to use each, what to test for each category.  And touched on the importance of manually testing and validating our accessibility support.

</Notes>

---

<List appear={false}>
  <li><h1>Tools</h1></li>
  <li><h1>Testing</h1></li>
</List>

<Notes>

- It was quite a bit to cover in the amount of time that we have, and there's still plenty to uncover that will help you create an accessibility development workflow that will benefit your projects and teams.
- But if there's one piece of advice i want to leave you with its this:
- It can feel really overwhelming if this is the first time you've thought about the accessibility of your products, and are taking stock of the work that needs to happen to bring it up to standards.
- But it's not expected that you to have a fully accessible site or 100% test coverage on day one.

</Notes>

---

<List appear={false}>
  <li><h1>Tools</h1></li>
  <li><h1>Testing</h1></li>
</List>

<Notes>

- make incremental changes where you can, and consistently chisel away at the accessiblity errors.
- eventually, implementing those small changes add up to possessing a deeper understanding of what it'll take to make your site accessible, and how to make it resilient against bugs.
- And if you're starting a brand new project, figure out what an accessible version of it looks like from the start.
- because we know what it will take to make our websites work for everyone, we're one step closer to building a better web for everyone.


</Notes>

---

# Thank You! 
